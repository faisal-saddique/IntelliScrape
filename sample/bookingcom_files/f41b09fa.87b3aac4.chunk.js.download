"use strict";(self["b-search-web-searchresults__LOADABLE_LOADED_CHUNKS__"]=self["b-search-web-searchresults__LOADABLE_LOADED_CHUNKS__"]||[]).push([["f41b09fa"],{"0f5c0451":function(e,n,t){t.d(n,{Z:function(){return N}});var i=t("dee2534d"),a=t("ead71eb0"),s=t.n(a),r=t("10db3f9d");const o=/<(\d+)>(.*?)<\/\1>|<(\d+)\/>/,c=/(?:\r\n|\r|\n)/g;function l(e,n){const t=e.replace(c,"").split(o);if(1===t.length)return e;const i=[],s=t.shift();s&&i.push(s);let d=0;for(const[o,c,_]of u(t)){if(n&&n[o]){d+=1;const e=n[o];if((0,r.isElement)(e))i.push((0,a.cloneElement)(e,{key:d},c?l(c,n):e.props.children));else{if(!(0,r.isValidElementType)(e)){i.push("\ud83d\udca2");continue}i.push((0,a.createElement)(e,{key:d},c&&l(c,n)))}}else i.push("\ud83d\udca2");_&&i.push(_)}return i}function u(e){if(!e.length)return[];const[n,t,i,a]=e.slice(0,4);return[[parseInt(n||i,10),t||"",a]].concat(u(e.slice(4,e.length)))}var d=function(e){let{text:n,variables:t,components:i}=e;const a=function(e,n){if(!n)return e;return Object.keys(n).reduce(((e,t)=>e.split(`[${t}]`).join(n[t]+"")),e)}(n,t);return s().createElement(s().Fragment,null,l(a,i))},_="b2ca975670",m="fae1400be2",g="a41871ce38",S="ee574b34fa",f=t("c44dcb0c");var N=e=>{let{title:n,header:t,subtitle:r,secondaryCta:o,primaryCta:c,closeAriaLabel:l,onClose:u,onCloseTrigger:N,onAfterOpen:p,position:v,size:E}=e;const[k,I]=(0,a.useState)(!0),L=(0,f.useI18n)(),h={closeBottomSheet:()=>I(!1)};return s().createElement(i.SheetContainer,{size:E,position:v,closeAriaLabel:l||L.trans((0,f.t)("close")),active:k,onCloseTrigger:()=>{I(!1),N&&N()},onClose:u,onAfterOpen:p,footer:c?s().createElement(i.Stack,{className:g,alignItems:"center",gap:3},s().createElement(i.Button,{href:c.link,size:"large",onClick:()=>c.onClick&&c.onClick(h),wide:!0,attributes:c.attributes},s().createElement(d,{text:c.title}))):null},s().createElement(i.Stack,{alignItems:"center",gap:3},t,s().createElement(i.Text,{tagName:"strong",variant:"headline_2",align:"center"},n),r&&r.map((e=>s().createElement(i.Text,{align:"center",key:e,variant:"body_1",tagName:"p",className:_},s().createElement(d,{text:e,variables:{start_bold:"<0>",end_bold:"</0>"},components:[s().createElement("b",{className:S,key:"not used"})]})))),o&&s().createElement(i.Button,{href:o.link,onClick:()=>o.onClick&&o.onClick(h),variant:"tertiary",className:m,wide:!0,attributes:o.attributes},s().createElement(d,{text:o.title}))))}},c66f4a5f:function(e,n,t){t.d(n,{ZK:function(){return a}});t("41c6c66e");var i=t("77a90307");const a=function(){if((0,i.r8)()){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const a=[(0,i.sk)()?"[Server Warning]":"[JS Warning]",...n];console.warn.apply(undefined,a)}}},"8f07fa45":function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var i=t("3d054e81"),a=t("ead71eb0"),s=t.n(a),r=t("0f5c0451"),o=t("22b0f37c"),c=t("dee2534d");const l=(0,a.createContext)({actionPage:"index"});function u(e){let{children:n,value:t}=e;return s().createElement(l.Provider,{value:t},n)}function d(){return(0,a.useContext)(l)}var _=t("af1e2b38"),m=t("cedcabf9");const g={},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissGeniusSignInSheet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissGeniusSignInBottomSheetInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"geniusGuestMutation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissSignInBottomSheet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSuccess"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorMessage"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:224,source:{body:"\n  mutation DismissGeniusSignInSheet(\n    $input: DismissGeniusSignInBottomSheetInput!\n  ) {\n    geniusGuestMutation {\n      dismissSignInBottomSheet(input: $input) {\n        isSuccess\n        errorMessage\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};const f={},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeniusSignInSheet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GeniusSignInBottomSheetInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"geniusGuestData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"signInBottomSheet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subtitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"closeAriaLabel"},name:{kind:"Name",value:"closeAccessibilityText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"signInCta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:273,source:{body:"\n  query GeniusSignInSheet($input: GeniusSignInBottomSheetInput!) {\n    geniusGuestData {\n      signInBottomSheet(input: $input) {\n        title\n        subtitle\n        closeAriaLabel: closeAccessibilityText\n        signInCta {\n          title\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var p=t("d0fefcf5");let v=function(e){return e.WILL_BE_SHOWN="WILL_BE_SHOWN",e.WILL_NOT_BE_SHOWN="WILL_NOT_BE_SHOWN",e.LOADING="LOADING",e}({});const E="CAPLA_EVENT_app_banner_will_be_displayed";function k(){const e=function(e){const[n,t]=(0,a.useState)();return(0,a.useEffect)((()=>{let i=!0;return async function(){if(!n)try{const n=await new Promise((n=>{p.eventBus.publish(e,{resolve:n})}));i&&t(n)}catch(a){}}(),function(){i=!1}}),[]),n}(E);return void 0===e?v.LOADING:e?v.WILL_BE_SHOWN:v.WILL_NOT_BE_SHOWN}let I=function(e){return e.WILL_BE_SHOWN="WILL_BE_SHOWN",e.WILL_NOT_BE_SHOWN="WILL_NOT_BE_SHOWN",e.LOADING="LOADING",e}({});const L=()=>{const[e,n]=(0,a.useState)(I.LOADING);return(0,a.useEffect)((()=>{function e(e){const t=e.detail.willBannerBeShown?I.WILL_BE_SHOWN:I.WILL_NOT_BE_SHOWN;n(t)}return document.addEventListener("cookie_banner_loaded",e),(()=>{let e=!0;return window.PCM&&1===window.PCM.isCountryNeedCookieBanner&&window.PCM.isUserGaveConsent instanceof Function&&!window.PCM.isUserGaveConsent()&&(e=!1),e})()&&n(I.WILL_NOT_BE_SHOWN),()=>document.removeEventListener("cookie_banner_loaded",e)}),[]),e};var h=t("dc6d28ff");let O=function(e){return e.WILL_BE_SHOWN="WILL_BE_SHOWN",e.WILL_NOT_BE_SHOWN="WILL_NOT_BE_SHOWN",e.LOADING="LOADING",e}({});var b=t("77a90307"),A=t("c66f4a5f");function W(){const e=(0,_.Z)().isMDOT,[n,t]=(0,a.useState)(e?O.LOADING:O.WILL_NOT_BE_SHOWN);return(0,a.useEffect)((()=>{if(e){const e=function(e){if((0,b.C5)()){const t=("; "+document.cookie).split("; "+e+"=");var n;if(2===t.length)return null===(n=t.pop())||void 0===n?void 0:n.split(";").shift()}else(0,A.ZK)("[getCookie] Function only works in client-side, don't use it in Server side rendering!")}("fscag01");t(e?O.WILL_BE_SHOWN:O.WILL_NOT_BE_SHOWN)}}),[]),n}const B=/^(b_feature_.*|exp_.*|i_am_from)$/;var G=function(e){var n;const t=(0,h.getRequestContext)(),i=t.getBPlatformEnvironment(),a=!(!i||"prod"!==i),s=t.getBasePageUrl(),r=t.getEncryptedCommonOauthState(),o=null===(n=t.getAffiliate())||void 0===n?void 0:n.id,c=t.getLanguage(),l=t.getActionName(),u=t.isInternalIp(),{componentId:d,iframe:_,popup:m,prompt:g,experimentVariant:S,experiments:f,customParams:N,devHosts:p}=e,v=s&&s.host.endsWith("booking.cn"),E=N||{},k=`https://${function(e,n,t){return e?"account.booking."+(n?"cn":"com"):t&&t.ap?t.ap:"account.dqs.booking.com"}(a,v,p)}/auth/oauth2`,I=`https://${function(e,n,t){return e?"secure.booking."+(n?"cn":"com"):t&&t.book?t.book:"book.dqs.booking.com"}(a,v,p)}/login.html?op=oauth_return`,L=new URL(k);L.searchParams.set("client_id",function(e){return e?"vO1Kblk7xX9tUn2cpZLS":"b_test_fe"}(a)),L.searchParams.set("redirect_uri",I),L.searchParams.set("response_type",e.anon?"anon_session":"code"),c&&L.searchParams.set("lang",c),o&&L.searchParams.set("aid",o.toString()),l&&L.searchParams.set("bkng_action",l),_&&(L.searchParams.set("iframe","1"),E.iframe="1"),m&&L.searchParams.set("popup","1"),g&&L.searchParams.set("prompt",g),S&&L.searchParams.set("variant",S.toString()),a&&!u||function(e,n){n.searchParams.forEach(((n,t)=>{B.test(t)&&e.searchParams.set(t,n)}))}(L,s);const O={id:d};if(f&&(O.data=function(e){const n={};return Object.keys(e).forEach((t=>{var i,a,s,r;const o={};null!==(i=e[t])&&void 0!==i&&i.variant&&(o.v=e[t].variant),null!==(a=e[t])&&void 0!==a&&a.auth_request_goal&&(o.g1=e[t].auth_request_goal),null!==(s=e[t])&&void 0!==s&&s.auth_page_loaded_goal&&(o.g2=e[t].auth_page_loaded_goal),null!==(r=e[t])&&void 0!==r&&r.auth_page_interaction_goal&&(o.g3=e[t].auth_page_interaction_goal),n[t]=o})),n}(f)),Object.keys(E).length&&(O.params=E),r){const e=function(e,n){try{let t;const i=JSON.stringify(n);return t=btoa(i),`${e}*${t}`}catch(t){return`${e}*`}}(r,O);e&&L.searchParams.set("state",e)}return L.toString()};let C=function(e){return e.BOOKING_PROCESS_2_AUTH_LOW="bs2_auth_low",e.BOOKING_PROCESS_INLINE="bp_inline",e.GENIUS_INDEX_SHEET="genius_index_sheet",e.GENIUS_LANDING_PAGE="genius_landing_page",e.GENIUS_LANDING_PAGE_INCENTIVE_CAMPAIGN="genius_lp_incentive_campaign",e.GENIUS_ROOM_TABLE_BANNER_MDOT="genius_rt_mdot_banner",e.GENIUS_ROOM_TABLE_BANNER_WWW="genius_room_table_banner_www",e.GENIUS_SEARCHRESULTS_SHEET="genius_searchresults_sheet",e.GENIUS_SHEET="genius_sheet",e.GENIUS_SIGN_IN_EMAIL_POPOVER="genius-sign-in-email-popover",e.HELP_CENTER="help_center",e.LOGIN_CARD="login_card",e.LOGIN_CARD_SOCIAL="login_card_social",e.TRAVELLER_HEADER="traveller_header",e.WISHLIST_BTN="wishlist_btn",e.WISHLIST_BTN_SR="wishlist_btn_sr",e}({});const T=()=>{const{actionPage:e}=d(),n=function(){var e,n,t;const i=L(),a=k(),s=W(),r=(0,h.getRequestContext)(),o=(null===(e=r.getUserIdentity())||void 0===e?void 0:e.authLevel)??0,c=null===(n=r.getAffiliate())||void 0===n?void 0:n.isGeniusAffiliate,l=[2393080,2393079].includes(null===(t=r.getAffiliate())||void 0===t?void 0:t.id);return!(0!==o||!c||l||a!==v.WILL_NOT_BE_SHOWN||i!==I.WILL_NOT_BE_SHOWN||s!==O.WILL_NOT_BE_SHOWN)}(),t=function(){const{actionPage:e}=d(),n={index:C.GENIUS_INDEX_SHEET,searchresults:C.GENIUS_SEARCHRESULTS_SHEET}[e];return G({componentId:n,prompt:"signin"})}(),{data:i}=function(e){const n={...f,...e};return m.useQuery(N,n)}({variables:{input:{dismissedSince:void 0,actionPage:e}},skip:!1===n}),[a]=function(e){const n={...g,...e};return m.useMutation(S,n)}();if(null===i||void 0===i||!i.geniusGuestData.signInBottomSheet)return null;const s=(0,_.Z)().isMDOT?"bottom":"center",{title:r,subtitle:o,signInCta:{title:c},closeAriaLabel:l}=i.geniusGuestData.signInBottomSheet;return{onAfterOpen:()=>{a({variables:{input:{actionPage:e}}})},closeAriaLabel:l,primaryCta:{onClick:e=>{let{closeBottomSheet:n}=e;return n()},title:c,link:t},position:s,subtitle:o,title:r}},D=()=>{const e=T();return e?s().createElement(r.Z,(0,i.Z)({},e,{header:s().createElement(c.Box,{padding:6},s().createElement(o.Z,{size:"larger"}))})):null};var y=function(e){let{isSearchResultsExperiment:n}=e;return s().createElement(u,{value:{actionPage:n?"searchresults":"index"}},s().createElement(D,null))}}}]);
//# sourceMappingURL=https://istatic.booking.com/internal-static/capla/static/js/f41b09fa.87b3aac4.chunk.js.map