"use strict";(self["b-search-web-searchresults__LOADABLE_LOADED_CHUNKS__"]=self["b-search-web-searchresults__LOADABLE_LOADED_CHUNKS__"]||[]).push([["56e8a417"],{"0f5c0451":function(e,t,n){n.d(t,{Z:function(){return v}});var i=n("dee2534d"),a=n("ead71eb0"),l=n.n(a),r=n("10db3f9d");const s=/<(\d+)>(.*?)<\/\1>|<(\d+)\/>/,c=/(?:\r\n|\r|\n)/g;function o(e,t){const n=e.replace(c,"").split(s);if(1===n.length)return e;const i=[],l=n.shift();l&&i.push(l);let d=0;for(const[s,c,m]of u(n)){if(t&&t[s]){d+=1;const e=t[s];if((0,r.isElement)(e))i.push((0,a.cloneElement)(e,{key:d},c?o(c,t):e.props.children));else{if(!(0,r.isValidElementType)(e)){i.push("\ud83d\udca2");continue}i.push((0,a.createElement)(e,{key:d},c&&o(c,t)))}}else i.push("\ud83d\udca2");m&&i.push(m)}return i}function u(e){if(!e.length)return[];const[t,n,i,a]=e.slice(0,4);return[[parseInt(t||i,10),n||"",a]].concat(u(e.slice(4,e.length)))}var d=function(e){let{text:t,variables:n,components:i}=e;const a=function(e,t){if(!t)return e;return Object.keys(t).reduce(((e,n)=>e.split(`[${n}]`).join(t[n]+"")),e)}(t,n);return l().createElement(l().Fragment,null,o(a,i))},m="b2ca975670",k="fae1400be2",f="a41871ce38",b="ee574b34fa",g=n("c44dcb0c");var v=e=>{let{title:t,header:n,subtitle:r,secondaryCta:s,primaryCta:c,closeAriaLabel:o,onClose:u,onCloseTrigger:v,onAfterOpen:p,position:E,size:N}=e;const[S,C]=(0,a.useState)(!0),h=(0,g.useI18n)(),y={closeBottomSheet:()=>C(!1)};return l().createElement(i.SheetContainer,{size:N,position:E,closeAriaLabel:o||h.trans((0,g.t)("close")),active:S,onCloseTrigger:()=>{C(!1),v&&v()},onClose:u,onAfterOpen:p,footer:c?l().createElement(i.Stack,{className:f,alignItems:"center",gap:3},l().createElement(i.Button,{href:c.link,size:"large",onClick:()=>c.onClick&&c.onClick(y),wide:!0,attributes:c.attributes},l().createElement(d,{text:c.title}))):null},l().createElement(i.Stack,{alignItems:"center",gap:3},n,l().createElement(i.Text,{tagName:"strong",variant:"headline_2",align:"center"},t),r&&r.map((e=>l().createElement(i.Text,{align:"center",key:e,variant:"body_1",tagName:"p",className:m},l().createElement(d,{text:e,variables:{start_bold:"<0>",end_bold:"</0>"},components:[l().createElement("b",{className:b,key:"not used"})]})))),s&&l().createElement(i.Button,{href:s.link,onClick:()=>s.onClick&&s.onClick(y),variant:"tertiary",className:k,wide:!0,attributes:s.attributes},l().createElement(d,{text:s.title}))))}},"3137589c":function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var i=n("ead71eb0"),a=n.n(i),l=n("dee2534d"),r="e85672ddc8",s="f416d2f794",c="f7c8421131",o="db954c60eb",u="df060cb361",d="c28d59bf06",m="e935a38334",k="f7ff2235dc",f="b86b204aa3",b="ef623758ff",g="a29f44fea2",v="e49926434f",p=n("8521b397"),E=n.n(p),N=n("22b0f37c");function S(e){let{illustration:t,className:n}=e;return a().createElement(l.Image,{asset:{setName:"illustrations-traveller",assetName:t},fallbackImage:"GeniusRewardGiftBoxDiscount",alt:"",className:n})}var C=e=>{let{title:t,subtitle:n,secondaryCta:p,primaryCta:C,closeAriaLabel:h,benefits:y,onClose:O,onCloseTrigger:A,onAfterOpen:_,position:L,size:D}=e;const[T,I]=(0,i.useState)(!0),F={closeBottomSheet:()=>I(!1)};return a().createElement(l.SheetContainer,{size:D,position:L,closeAriaLabel:h,active:T,onCloseTrigger:()=>{I(!1),A&&A()},onClose:O,onAfterOpen:_,fill:!0,footer:C?a().createElement(l.Stack,{className:E()({[m]:!0,[k]:"center"===L}),alignItems:"center",gap:3},p&&a().createElement(l.Button,{href:p.link,onClick:()=>p.onClick&&p.onClick(F),variant:"tertiary",className:d,wide:!0},p.title),a().createElement(l.Button,{href:C.link,size:"large",onClick:()=>C.onClick&&C.onClick(F),wide:!0},C.title)):null,title:a().createElement(l.Stack,{alignItems:"center",className:E()({[r]:!0,[s]:"center"===L}),gap:8},a().createElement(N.Z,{size:"medium"}),a().createElement(l.Text,{tagName:"strong",variant:"headline_2",align:"center"},t))},a().createElement(l.Stack,{alignItems:"center",className:E()({[o]:!0,[u]:"center"===L}),gap:3},n&&n.map((e=>a().createElement(l.Text,{align:"center",key:e,variant:"body_1",tagName:"p",className:c},e))),a().createElement(l.Stack.Item,{className:f},a().createElement(l.Stack,{tagName:"ul",className:b},y.map((e=>{let{illustration:t,text:n}=e;return a().createElement(l.Stack.Item,{key:n,tagName:"li"},a().createElement(l.Stack,{alignItems:"center",direction:"row",justifyContent:"start",wrap:"nowrap"},a().createElement(l.Stack.Item,null,a().createElement(S,{illustration:t,className:g})),a().createElement(l.Stack.Item,{alignSelf:"center",className:v},n)))}))))))},h=n("af1e2b38");var y=function(e){let{benefits:t,closeAriaLabel:n,onAfterOpen:i,secondaryCta:l,primaryCta:r,subtitle:s,title:c}=e;const{isMDOT:o}=(0,h.Z)(),u=o?"fullScreen":"center";return a().createElement(C,{benefits:t,closeAriaLabel:n,onAfterOpen:i,secondaryCta:l,primaryCta:r,position:u,subtitle:s,title:c})},O=n("0f5c0451"),A=n("017725b3");const _={[A.REE.LEVEL_ONE]:"GeniusOnboardingEiffelTower",[A.REE.LEVEL_TWO]:"GeniusOnboardingHotAirBalloon",[A.REE.LEVEL_THREE]:"GeniusOnboardingMountain"};var L=function(e){let{level:t}=e;if(!t)return null;const n=_[t];return a().createElement(l.Image,{width:256,asset:{setName:"illustrations-traveller",assetName:n}})};var D=function(e){let{level:t,closeAriaLabel:n,onAfterOpen:i,secondaryCta:l,primaryCta:r,subtitle:s,title:c}=e;const{isMDOT:o}=(0,h.Z)(),u=o?"bottom":"center";return a().createElement(O.Z,{header:a().createElement(L,{level:t}),closeAriaLabel:n,onAfterOpen:i,secondaryCta:l,primaryCta:r,position:u,subtitle:s,title:c})},T=n("dc6d28ff"),I=n("d0fefcf5"),F=n("d1e54a96"),G=n("cedcabf9");const x={},w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissGeniusOnboarding"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissOnboardingInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"geniusGuestMutation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissOnboarding"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSuccess"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorMessage"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:195,source:{body:"\n  mutation DismissGeniusOnboarding($input: DismissOnboardingInput!) {\n    geniusGuestMutation {\n      dismissOnboarding(input: $input) {\n        isSuccess\n        errorMessage\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};const B={},M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeniusOnboarding"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GeniusOnboardingInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"geniusGuestData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"onboarding"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"level"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subtitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"closeAccessibilityText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"benefits"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"illustration"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"learnMoreCta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"link"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"startSearchCta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:392,source:{body:"\n  query GeniusOnboarding($input: GeniusOnboardingInput!) {\n    geniusGuestData {\n      onboarding(input: $input) {\n        level\n        title\n        subtitle\n        closeAccessibilityText\n        benefits {\n          illustration\n          text\n        }\n        learnMoreCta {\n          title\n          link\n        }\n        startSearchCta {\n          title\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function R(e){var t;let{isSearchResultsExperiment:n}=e;const a=null===(t=(0,T.getRequestContext)())||void 0===t||null===(t=t.getUserIdentity())||void 0===t||!t.userId,[l]=function(e){const t={...x,...e};return G.useMutation(w,t)}(),{data:r}=function(e){const t={...B,...e};return G.useQuery(M,t)}({skip:a,variables:{input:{actionPage:n?"searchresults":"index"}}});if(!function(e){const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(t)return;let i=()=>{},a=!0;return new Promise((e=>{i=e})).then((()=>{a&&n(!0)})).catch((()=>{})),I.eventBus.publish(e,{resolve:i}),function(){a=!1}}),[e,n,t]),t}("CAPLA_EVENT_generic_CHECK_AUTOOPEN_MODALS")||null===r||void 0===r||!r.geniusGuestData.onboarding)return;const{closeAccessibilityText:s,startSearchCta:c,learnMoreCta:o,subtitle:u,level:d,benefits:m,title:k}=r.geniusGuestData.onboarding,f=function(e){let{link:t,title:n}=e;const i=new URLSearchParams;return i.set("ge_onboarding_ref","1"),{link:(0,F.constructUrl)({searchParams:i,pathname:t}).toString(),title:n}}(o),b={onClick:e=>{let{closeBottomSheet:t}=e;return t()},...c},g=()=>{I.eventBus.publish("CAPLA_EVENT_generic_GENIUS_ONBOARDING_AFTER_OPEN"),l({variables:{input:{level:d}}})};let v={level:d,closeAriaLabel:s,onAfterOpen:g,secondaryCta:f,primaryCta:b,subtitle:u,title:k};if(m){v={benefits:m,level:d,closeAriaLabel:s,onAfterOpen:g,secondaryCta:f,primaryCta:b,subtitle:u,title:k}}return v}function V(e){let{isSearchResultsExperiment:t}=e;const n=R({isSearchResultsExperiment:t});return n?a().createElement(a().Fragment,null,function(e){return"benefits"in e}(n)?a().createElement(y,n):a().createElement(D,n)):null}}}]);
//# sourceMappingURL=https://istatic.booking.com/internal-static/capla/static/js/56e8a417.221b0490.chunk.js.map