(this.$WP=this.$WP||[]).push(["j3bsmh",(e,s)=>{var n,a,t,o,i,r,l,d,c,u,p,m,g,h,_,f,b,v,M,w,C,y,k,I,T,S,N,E,x,q,O,R,G,j=()=>{var{fetching:e,bucket:s}=h({experiment:"chrome_fedcm_google_one_tap_updates_1705078995",logImpression:!0});return{fetching:e,isFedcmExperiment:!e&&"test"===s}},L="GOOGLE_ONETAP",F=({enhancedGoogleOneTapGate:e})=>t(()=>e?{pid:40670,flow:L,deferShowOverlay:!0}:{pid:40185,flow:L,deferShowOverlay:!0},[e]),P=()=>{var e=o(()=>M.remove("g_state"),[]);return i(()=>e,[e]),e},z=(e={skipImpression:!0})=>{var{page:s,params:n}=w(),a="AttractionProductsFusion",t=s===a&&"contentId"in n&&null!=n.contentId&&n.contentId.length>0,o=C({experimentKeys:["disable_pop_ups_on__ap_1687359717"],skipImpression:e?.skipImpression,page:a},!t);return t&&o?.disable_pop_ups_on__ap_1687359717==="test"},D=({onNotDisplayed:e,onUserSkipped:s,onCredentialReady:n,onAutoCancelled:a,onGeneralSkipDismiss:d,isFedcmEligible:c,fetchingFedcmExperiment:u,containerId:p,flow:m,pid:g})=>{var h=r(null),[M,w]=l(!1),C=_(),y=N(),k=z({skipImpression:!1}),I=o((e,s)=>{C({module:"google_onetap",action:e,context:`${s}|${m}|isFedCM: ${c}`,value:g})},[m,g,C,c]),T=o(e=>{e&&(I("credentials_success",e.select_by),n(e.credential),w(!1))},[n,I]),S=o((s,n)=>{!k&&(I("display_event",n||"success"),b(s),w(s),s||e())},[e,I,k]),E=o(e=>{I("skipped_event",e),w(!1),"user_cancel"===e?s():"auto_cancel"===e?a():d&&d("skipped",e)},[s,a,d,I]),x=o(e=>{I("dismiss_event",e),w(!1),d&&(d("dismissed",e),"credential_returned"!==e&&d("dismissed",e))},[I,d]),q=o(e=>{switch(y(),e.getMomentType()){case"display":S(e.isDisplayed(),e.getNotDisplayedReason());break;case"skipped":E(c?"unknown_reason":e.getSkippedReason());break;case"dismissed":x(e.getDismissedReason())}},[y,S,E,c,x]),O=o(e=>{null===h.current&&(h.current=e,I("requested","na"),e.initialize({client_id:"1070328450902.apps.googleusercontent.com",callback:T,cancel_on_tap_outside:!1,prompt_parent_id:p,auto_select:!v(),use_fedcm_for_prompt:c}),e.prompt(q))},[I,T,p,c,q]);return i(()=>{I("script_requested","na"),f("https://accounts.google.com/gsi/client","MEMX").then(()=>{var e=()=>!u&&O(window.google.accounts.id);window.google?.accounts?.id?.initialize?e():window.onGoogleLibraryLoad=e})},[O,I,u]),i(()=>()=>{h.current&&h.current.cancel()},[]),t(()=>({shown:M}),[M])},A=e=>e+61+49,B=()=>({top:A(0),bottom:0}),$=()=>document.getElementById("credential_picker_iframe"),V={oneTapMessageContainer:"ZkqhQ Gi B1 Z BB Cj Za",oneTapMessageMobileContainer:"SuwMt D Gi l",oneTapMessageInnerContainer:"QnnKe z",oneTapIcon:"MPoqM Cj",headline:"LcmJt Cj Hn o q f u",rtl:"wVHIl",subhead:"ZnAJV Cj o q"},Z=({bottom:e})=>{var s=m(),{userAgentCategory:o}=c();return t(()=>"MOBILE"===o,[o])?n("div",{className:y(V.oneTapMessageMobileContainer,V.oneTapMessageContainer),style:{bottom:`${e||0}px`},children:n("div",{className:V.oneTapMessageInnerContainer,children:a("h3",{className:V.headline,children:[n("span",{className:V.oneTapIcon,children:n(k,{})}),n(p,{id:"onetap_message_unlock",messages:"Unlock the best of Tripadvisor"})," "]})})}):n("div",{className:y(V.oneTapMessageContainer,{[V.rtl]:s}),children:a("div",{className:V.oneTapMessageInnerContainer,children:[a("h3",{className:V.headline,children:[n("span",{className:V.oneTapIcon,children:n(k,{})}),n(p,{id:"onetap_message_unlock",messages:"Unlock the best of Tripadvisor"})," "]}),a("p",{className:V.subhead,children:[n(p,{id:"onetap_message_subhead_to_get_the_most",messages:"Sign in to get the most out of Tripadvisor"})," "]})]})})},H=({shown:e,isContextualMessagingEnabled:s,onShow:a})=>{var{bottom:t}=x(),[o,r]=l(!1),[d,c]=l(0);return i(()=>{if(!e)return()=>{};var n=$();if(n){if(n.style.bottom=`${t}px`,n.style.zIndex="10105",!s)return()=>{};var a,o=new MutationObserver(e=>{var s=e?.[0]?.target;if(s instanceof HTMLElement){clearTimeout(a);var n=parseInt(s?.style?.height||"0",10),t=isNaN(n)?0:n-9;a=setTimeout(()=>{c(t),r(t>0)},400)}});return o.observe(n,{attributes:!0}),()=>{o.disconnect(),clearTimeout(a)}}return()=>{}},[t,e,s]),i(()=>{e&&a&&a()},[e,a]),e&&o?n(q,{bottom:d+t}):null},Q=({shown:e,containerId:s,isContextualMessagingEnabled:t,onShow:o})=>{var{top:d}=x(),[c,u]=l(!1),p=r(null);return i(()=>{if(e&&p&&p.current){var s=p.current.children[0];s&&(s.style.zIndex="10107",s.children&&0!==s.children.length&&(s.children[0].onload=()=>{u(t)}))}},[e,t]),i(()=>{e&&o&&o()},[e,o]),a("div",{className:y("mxEhR D y G- Za f e u",{LEMGe:!e}),style:{top:d},children:[c&&n(q,{}),n("div",{id:s,className:"hRNvt M0",ref:p})]})},U=["CheapFlightsSearchResults","CheapFlightsSearchDeals","MobileCheapFlightsSearchResults"],X="tripGoogleOnetapContainer",J=({trackWouldOpenExplicitPreferences:e,openExplicitPreferences:s,explicitPreferencesEnabled:a,servletName:t,enhancedGoogleOneTapGate:r,onDismiss:l,onShow:p,onSuccessfulLogin:m,onAutoCancelled:h,triggerNext:_,suppressContextualMessage:f,onIFrameShown:b,isFullScreen:v,fullScreenHeader:M})=>{var w=d(),C=d(),{fetching:y,isFedcmExperiment:k}=j(),N=S({enhancedGoogleOneTapGate:r}),x=g(),{fetching:q,isTermsPageExperiment:L}=I(),{fetching:F,isNoCloseModal:P}=T(),z=!q&&!!L,D=!F&&!!P,{browser:A}=c(),B="CHROME"===A.family&&A.majorVersion>=108&&k,V=o(n=>{w({extraQueryParams:{google_id_token:n,isFedCM:B},isFullScreen:!!v,closeX:!z,disableCloseOptions:D,fullScreenHeader:M,onSwitchFlow:e=>{C(e)},onSuccess:n=>{m&&n&&n.userId&&m(!!n.hasCreatedMember,n.userId),n&&!0===n.hasCreatedMember&&(e&&e(),a&&s&&s())},onClose:()=>{G.has(x)||window.location.reload()},...N})},[a,M,B,v,w,N,m,s,C,e,z,D,x]),{shown:Z}=E({onNotDisplayed:()=>{_(),l()},onUserSkipped:l,onAutoCancelled:()=>{h&&h()},onGeneralSkipDismiss:l,onCredentialReady:V,isFedcmEligible:B,fetchingFedcmExperiment:y,containerId:X,pid:N.pid,flow:N.flow});i(()=>{if(Z){var e=$();e&&b&&b(e)}},[Z,b]);var H=u(),Q=!f&&(null==t||!U.includes(t));return"MOBILE"===H&&$()?n(O,{shown:Z,onShow:p,isContextualMessagingEnabled:Q}):n(R,{shown:Z,onShow:p,containerId:X,isContextualMessagingEnabled:Q})};return[()=>{S=F,N=P,E=D,x=B,q=Z,O=H,R=Q,G=new Set(["en-US","es-AR","es-CL","es-CO","es-MX","es-PE","es-VE"]),e("default",J)},[e=>(n=e.jsx,a=e.jsxs),e=>(t=e.useMemo,o=e.useCallback,i=e.useEffect,r=e.useRef,l=e.useState),e=>d=e.default,e=>c=e.useUserAgent,e=>u=e.useViewportCategory,e=>(p=e.default,m=e.useRtl,g=e.useLocale),e=>h=e.useExperimentBucket,e=>_=e.useGARecorder,e=>f=e.importScript,e=>(b=e.setOneTapEligibility,v=e.userSignedOut),e=>M=e.default,e=>w=e.useRoute,e=>C=e.default,e=>y=e.default,e=>k=e.default,e=>(I=e.useGoogleOneTapTermsPage,T=e.useShowGoogleOneTapTermsPageNoCloseModal)]]},["21h32l","o4yt4q","lchj5q","nnprhg","ys6v1o","7thqz4","a2qxj9","32pwc7","q7wvkq","cyrz7y","5gpqhx","fgwvq1","gugp1d","fkji80","ympq4z","nicnt2"]]);
